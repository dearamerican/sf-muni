<!DOCTYPE html>
<html ng-app="muniApp">
  <head>
    <meta http-equiv="content-type"
          content="text/html; charset=ISO-8859-1" />
    <script src="/bower_components/angular/angular.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <script src="/bower_components/async/dist/async.min.js"></script>
    <script src="/bower_components/d3/d3.min.js"></script>
    <script src="/bower_components/d3-tip/index.js"></script>
    <script src="muni.js"></script>
    <script src="muniModel.js"></script>
    <link rel="stylesheet" href="muni.css">
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="//rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">
  </head>
  <body>
    <div ng-controller="MuniController">
      <table id="legend">
        <thead>
          <tr>
            <td>All Routes</td>
          </tr>
        </thead>
        <tbody>
          <tr class="placeholder"></tr>
          <tr ng-repeat="(key, value) in data.busColorsByRoute"
              ng-click="ui.filterBusesByRoute(key)"
              ng-class="{'selected': data.isRouteSelected(key)}">
            <td>{{key}}</td>
            <td>
              <div class="color-swatch" ng-style="{'background-color':value }"></div>
            </td>
            <td>
              <div class="icon-container">
                <span class="ion-ios-arrow-right" ng-if="!data.isRouteSelected(key)"></span>
                <span class="ion-ios-checkmark-outline" ng-if="data.isRouteSelected(key)"></span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <table id="my-selections">
        <thead>
          <tr>
            <td> My Selections</td>
          </tr>
        </thead>
        <tbody>
          <tr class="placeholder"></tr>
          <tr ng-repeat="(key, value) in data.filteredColorRouteMapping()"
              ng-click="ui.filterBusesByRoute(key)">
            <td>{{key}}</td>
            <td>
              <div class="color-swatch" ng-style="{'background-color':value }"></div>
            </td>
            <td>
              <div class="icon-container">
                <span class="ion-ios-close-empty"></span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <span id="map"></span>
      <span id="buses-overlay"></span>
  </body>
</html>